---
title: "Prova"
author: "GG"
date: "12/07/2019"
bibliography: 
  -references/ref1.bib
  -references/elon_artc1.bib
output:
  pdf_document:
    citation_package: biblatex
--- 

# Try

Fede is stupid because 

## To


### do

#### titles


Try to insert c  [@commissionPublicNoticeTerms2008]

```{r}
install.packages("dplyr")
install.packages("tidyverse")
install.packages("readxl")

library(readxl)
```

```{r}
elon =  read.csv("elon.csv")
dim(elon)
head(elon)

```


Take crypto data

```{r}
# install.packages("devtools")
devtools::install_github("sstoeckl/crypto2", force=TRUE)
library(crypto2)
library(dplyr)
library(lubridate)
#take daily hist of BTC
coins <- crypto_list(only_active=TRUE)
btc_hist <- crypto_history(coins, limit=1, start_date="20110101", end_date="20220131")

library(stringr)

as.data.frame(btc_hist)
btc_hist$timestamp <- format(as.POSIXct(btc_hist$timestamp,format="%Y-%m-%d %H:%M:%OS"),format='%m/%d/%Y')
btc_hist$timestamp <- as.Date(as.character(btc_hist$timestamp), format='%m/%d/%Y')

#subset tweets keeping those that contains ("bitcoin","crypto")
eloncrypto <- elon[grepl("crypto", elon[["tweet"]]),]
as.data.frame(eloncrypto)
eloncrypto$date <- format(as.POSIXct(eloncrypto$date,format="%Y-%m-%d %H:%M:%OS"),format='%m/%d/%Y')
eloncrypto$date <- as.Date(as.character(eloncrypto$date), format='%m/%d/%Y')
btc_hist['tweet'] <- btc_hist$timestamp %in% eloncrypto$date

```

graph try

```{r}
library(ggplot2)
btc_hist %>%
ggplot(aes(x = timestamp, y = open)) +
  geom_line() + 
  geom_point(data = . %>% filter(tweet == TRUE), color = "deeppink", size = 3)
```



